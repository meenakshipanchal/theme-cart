{{ 'custom-collection-list.css' | asset_url | stylesheet_tag }}
{{ 'metaobject-collection.css' | asset_url | stylesheet_tag }}
{{ 'variant-card.css' | asset_url | stylesheet_tag }}

{{ 'component-rating.css' | asset_url | stylesheet_tag }}
  {{ 'quick-order-list.css' | asset_url | stylesheet_tag }}
  {{ 'quantity-popover.css' | asset_url | stylesheet_tag }}
  {{ 'quick-add.css' | asset_url | stylesheet_tag }}

{% for block in section.blocks %}
  <div class="collection" id="collection_{{- forloop.index -}}">
    <div class="page-width">
      <div class="collection-banner">
        <div class="collection-content">
          <h2 class="h0">{{ block.settings.title }}</h2>
          {{ block.settings.text }}
          <a class="button" href="{{ block.settings.link }}">{{ section.settings.btn_txt }}&nbsp;
            <svg width="14" height="14" viewBox="0 0 20 20">
              <path id="Path_341797" data-name="Path 341797" d="M11.16,8.693a9.578,9.578,0,0,0,3.86-.787,10.246,10.246,0,0,0,3.191-2.167,10.19,10.19,0,0,0,2.162-3.186,9.621,9.621,0,0,0,.782-3.865,9.578,9.578,0,0,0-.787-3.86,10.309,10.309,0,0,0-2.167-3.2,10.059,10.059,0,0,0-3.191-2.162,9.687,9.687,0,0,0-3.86-.777,9.65,9.65,0,0,0-3.855.777A10.136,10.136,0,0,0,4.1-8.368a10.192,10.192,0,0,0-2.167,3.2,9.632,9.632,0,0,0-.782,3.86,9.567,9.567,0,0,0,.787,3.865A10.263,10.263,0,0,0,4.109,5.739,10.263,10.263,0,0,0,7.3,7.906,9.567,9.567,0,0,0,11.16,8.693Zm0-1.832A8.012,8.012,0,0,1,7.98,6.228a8.2,8.2,0,0,1-2.6-1.755,8.132,8.132,0,0,1-1.75-2.6A8.069,8.069,0,0,1,3-1.312a8.069,8.069,0,0,1,.628-3.181,8.132,8.132,0,0,1,1.75-2.6,8.147,8.147,0,0,1,2.6-1.75,8.032,8.032,0,0,1,3.175-.628,8.107,8.107,0,0,1,3.186.628A8.116,8.116,0,0,1,16.945-7.1a8.132,8.132,0,0,1,1.75,2.6,8.069,8.069,0,0,1,.628,3.181A8.069,8.069,0,0,1,18.7,1.869a8.132,8.132,0,0,1-1.75,2.6,8.2,8.2,0,0,1-2.6,1.755A8.012,8.012,0,0,1,11.16,6.861Zm5-8.194a.91.91,0,0,0-.3-.628L12.571-5.244a.773.773,0,0,0-.556-.206.71.71,0,0,0-.53.216.724.724,0,0,0-.211.525.751.751,0,0,0,.237.566l1.2,1.173,1.132.926-2.028-.093H6.909a.755.755,0,0,0-.571.232.8.8,0,0,0-.221.571.791.791,0,0,0,.221.576.764.764,0,0,0,.571.226h4.91l2.028-.082L12.715.325l-1.2,1.163a.719.719,0,0,0-.237.556.754.754,0,0,0,.211.54.7.7,0,0,0,.53.221.756.756,0,0,0,.556-.226L15.864-.694A.9.9,0,0,0,16.163-1.332Z" transform="translate(-1.155 11.307)" fill="#fff"></path>
            </svg>
          </a>
        </div>
        <figure>
          {{ block.settings.image | image_url: width: 1200 | image_tag: widths: '320, 480, 720, 900, 1200' }}
        </figure>
      </div>
      <div class="product-list grid product-grid grid--2-col-tablet-down grid--4-col-desktop">
        {%- for product in block.settings.products -%}
          <li
            class="grid__item{% if settings.animations_reveal_on_scroll %} scroll-trigger animate--slide-in{% endif %}"
            {% if settings.animations_reveal_on_scroll %}
              data-cascade
              style="--animation-order: {{ forloop.index }}; z-index: {{ 100 | minus: forloop.index }}"
            {% endif %}>
            {% render 'card-product-variants',
              card_product: product,
              product: product,
              show_rating: true,
              lazy_load: 'lazy',
              quick_add: 'standard',
              section_id: section.id
              skip_styles: true
            %}
          </li>
        {%- endfor -%}
      </div>
    </div>
  </div>
{% endfor %}

<script src="{{ 'custom-variant-update.js' | asset_url }}" defer></script>

{% schema %}
  {
    "name": "Custom List Collection",
    "tag": "section",
    "class": "section",
    "disabled_on": {
      "groups": ["header", "footer"]
    },
    "settings": [
      {
        "type": "text",
        "id": "btn_txt",
        "label": "Button Text",
        "default": "Shop Products"
      }
    ],
    "blocks": [
      {
        "type": "collection",
        "name": "Collection",
        "limit": 8,
        "settings": [
          {
            "type": "url",
            "id": "link",
            "label": "Url"
          },
          {
            "type": "header",
            "content": "Banner"
          },
          {
            "type": "image_picker",
            "id": "image",
            "label": "Image"
          },
          {
            "type": "inline_richtext",
            "id": "title",
            "label": "Title"
          },
          {
            "type": "richtext",
            "id": "text",
            "label": "Describe"
          },
          {
            "type": "header",
            "content": "Product List"
          },
          {
            "type": "product_list",
            "id": "products",
            "label": "Products"
          }
        ]
      }
    ]
  }
{% endschema %}