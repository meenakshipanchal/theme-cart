{{ 'track-order.css' | asset_url | stylesheet_tag }}
<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.6.1/jquery.min.js" crossorigin="anonymous" referrerpolicy="no-referrer"></script>
<script src="https://momentjs.com/downloads/moment.min.js"></script>
<script>
  const success = '<svg width="102" height="101" viewBox="0 0 102 101" fill="none"><ellipse cx="51" cy="50.5" rx="51" ry="50.5" fill="#FDEEA1"/><path d="M42.135 74L20 51.8113L27.0433 44.7509L42.135 59.8791L74.939 27L82 34.0338L42.135 74Z" fill="#F2CB05"/></svg>';
  const circledash = '<svg width="32" height="32" viewBox="0 0 32 32" fill="none"><path d="M7.70116 4.69994C6.55416 5.58012 5.54327 6.6247 4.70116 7.79994L6.30116 8.99994C7.03561 7.98137 7.91102 7.07229 8.90116 6.29994L7.70116 4.69994ZM4.60116 12.2999L2.70116 11.6999C2.21813 13.0813 1.9812 14.5367 2.00116 15.9999H4.00116C3.99711 14.7421 4.19981 13.4921 4.60116 12.2999ZM2.70116 20.3999C3.16493 21.7944 3.8394 23.1096 4.70116 24.2999L6.30116 23.0999C5.57824 22.0877 5.00564 20.9762 4.60116 19.7999L2.70116 20.3999ZM7.80116 27.2999C8.9915 28.1617 10.3067 28.8362 11.7012 29.2999L12.3012 27.3999C11.1249 26.9955 10.0134 26.4229 9.00116 25.6999L7.80116 27.2999ZM11.7012 2.69994L12.3012 4.59994C13.4933 4.19859 14.7433 3.99589 16.0012 3.99994V1.99994C14.5379 1.97998 13.0825 2.21691 11.7012 2.69994ZM24.2012 27.2999C25.3791 26.4221 26.4233 25.3778 27.3012 24.1999L25.7012 22.9999C24.9575 24.0437 24.045 24.9563 23.0012 25.6999L24.2012 27.2999ZM27.4012 19.6999L29.3012 20.2999C29.7362 18.9068 29.9718 17.4591 30.0012 15.9999H28.0012C28.0052 17.2578 27.8025 18.5078 27.4012 19.6999ZM29.2012 11.5999C28.7374 10.2055 28.0629 8.89028 27.2012 7.69994L25.6012 8.89994C26.3241 9.91216 26.8967 11.0237 27.3012 12.1999L29.2012 11.5999ZM24.1012 4.59994C22.9108 3.73818 21.5956 3.06371 20.2012 2.59994L19.6012 4.49994C20.7774 4.90442 21.8889 5.47702 22.9012 6.19994L24.1012 4.59994ZM20.3012 29.2999L19.7012 27.3999C18.509 27.8013 17.259 28.004 16.0012 27.9999V29.9999C17.4546 29.9134 18.8953 29.6788 20.3012 29.2999Z" fill="#C5CCD8"/></svg>';
  const checkmark = '<svg width="32" height="32" viewBox="0 0 32 32" fill="none"><path d="M16 2C13.2311 2 10.5243 2.82109 8.22202 4.35943C5.91973 5.89777 4.12532 8.08427 3.06569 10.6424C2.00607 13.2006 1.72882 16.0155 2.26901 18.7313C2.80921 21.447 4.14258 23.9416 6.10051 25.8995C8.05845 27.8574 10.553 29.1908 13.2687 29.731C15.9845 30.2712 18.7994 29.9939 21.3576 28.9343C23.9157 27.8747 26.1022 26.0803 27.6406 23.778C29.1789 21.4757 30 18.7689 30 16C30 12.287 28.525 8.72601 25.8995 6.1005C23.274 3.475 19.713 2 16 2V2ZM14 21.5908L9.00001 16.5908L10.5906 15L14 18.4092L21.41 11L23.0057 12.5859L14 21.5908Z" fill="#669966"/></svg>';
  const arrow = '<svg width="46" height="16" viewBox="0 0 46 16" fill="none"><path d="M45.7071 8.70711C46.0976 8.31658 46.0976 7.68342 45.7071 7.29289L39.3431 0.928932C38.9526 0.538408 38.3195 0.538408 37.9289 0.928932C37.5384 1.31946 37.5384 1.95262 37.9289 2.34315L43.5858 8L37.9289 13.6569C37.5384 14.0474 37.5384 14.6805 37.9289 15.0711C38.3195 15.4616 38.9526 15.4616 39.3431 15.0711L45.7071 8.70711ZM0 9H45V7H0V9Z" fill="#05A081"/></svg>';
  const helpicon = '<svg width="86" height="86" viewBox="0 0 86 86" fill="none"><circle cx="43" cy="43" r="43" fill="white"/><path d="M40 59H46V64H40V59Z" fill="#0F1935" stroke="#0F1935" stroke-width="0.5"/><path d="M42.997 21C35.9336 21 31 25.9935 31 33.1427H35.7969C35.7969 28.6467 38.5547 25.8551 42.997 25.8551C47.3016 25.8551 50.197 28.7857 50.197 33.1427C50.197 35.5955 48.2141 38.6594 46.2983 40.2144C41.8765 43.786 40.6042 46.5423 40.6042 52.4955V55H45.401V52.4955C45.401 48.0046 46.0199 46.6547 49.2956 44.0121C52.0442 41.7901 55 37.4429 55 33.1471C54.9941 26.1061 49.9482 21 42.997 21Z" fill="#0F1935" stroke="#0F1935" stroke-width="0.5"/></svg>';
  const infoicon = '<svg x="0px" y="0px" width="24" height="24" viewBox="0 0 512 512" style=" fill:#000000;"><path fill="#25B7D3" d="M504.1,256C504.1,119,393,7.9,256,7.9C119,7.9,7.9,119,7.9,256C7.9,393,119,504.1,256,504.1C393,504.1,504.1,393,504.1,256z"></path><path fill="#FFF" d="M323.2 367.5c-1.4-2-4-2.8-6.3-1.7-24.6 11.6-52.5 23.9-58 25-.1-.1-.4-.3-.6-.7-.7-1-1.1-2.3-1.1-4 0-13.9 10.5-56.2 31.2-125.7 17.5-58.4 19.5-70.5 19.5-74.5 0-6.2-2.4-11.4-6.9-15.1-4.3-3.5-10.2-5.3-17.7-5.3-12.5 0-26.9 4.7-44.1 14.5-16.7 9.4-35.4 25.4-55.4 47.5-1.6 1.7-1.7 4.3-.4 6.2 1.3 1.9 3.8 2.6 6 1.8 7-2.9 42.4-17.4 47.6-20.6 4.2-2.6 7.9-4 10.9-4 .1 0 .2 0 .3 0 0 .2.1.5.1.9 0 3-.6 6.7-1.9 10.7-30.1 97.6-44.8 157.5-44.8 183 0 9 2.5 16.2 7.4 21.5 5 5.4 11.8 8.1 20.1 8.1 8.9 0 19.7-3.7 33.1-11.4 12.9-7.4 32.7-23.7 60.4-49.7C324.3 372.2 324.6 369.5 323.2 367.5zM322.2 84.6c-4.9-5-11.2-7.6-18.7-7.6-9.3 0-17.5 3.7-24.2 11-6.6 7.2-9.9 15.9-9.9 26.1 0 8 2.5 14.7 7.3 19.8 4.9 5.2 11.1 7.8 18.5 7.8 9 0 17-3.9 24-11.6 6.9-7.6 10.4-16.4 10.4-26.4C329.6 96 327.1 89.6 322.2 84.6z"></path></svg>';
  
  var isMobile = false;
  if(/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|ipad|iris|kindle|Android|Silk|lge |maemo|midp|mmp|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\.(browser|link)|vodafone|wap|windows (ce|phone)|xda|xiino/i.test(navigator.userAgent) || /1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s\-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|\-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw\-(n|u)|c55\/|capi|ccwa|cdm\-|cell|chtm|cldc|cmd\-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc\-s|devi|dica|dmob|do(c|p)o|ds(12|\-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(\-|_)|g1 u|g560|gene|gf\-5|g\-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd\-(m|p|t)|hei\-|hi(pt|ta)|hp( i|ip)|hs\-c|ht(c(\-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i\-(20|go|ma)|i230|iac( |\-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc\-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|\-[a-w])|libw|lynx|m1\-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m\-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(\-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)\-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|\-([1-8]|c))|phil|pire|pl(ay|uc)|pn\-2|po(ck|rt|se)|prox|psio|pt\-g|qa\-a|qc(07|12|21|32|60|\-[2-7]|i\-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h\-|oo|p\-)|sdk\/|se(c(\-|0|1)|47|mc|nd|ri)|sgh\-|shar|sie(\-|m)|sk\-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h\-|v\-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl\-|tdg\-|tel(i|m)|tim\-|t\-mo|to(pl|sh)|ts(70|m\-|m3|m5)|tx\-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|\-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(\-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas\-|your|zeto|zte\-/i.test(navigator.userAgent.substr(0,4))) {  isMobile = true; }
  
  function trackSuccess(data) {
        jQuery('.track-form').hide();
        jQuery('#loadmore').remove();
        jQuery('.back-button').show();
    console.log(data);
    
        const anvData = data.anveshan,
              track = data.order_tracking;
      const myTrack = [];
    function trackLabel(val) {
      switch(val) {
        case '42': case 'OP':
          return 'Dispatched';
        case '18': case 'OT':
          return 'In Transit';
        case '17': case 'OO':
          return 'Out For Delivery';
        case '7': case 'DL':
          return 'Delivered';
      }
    }
    
    if(anvData.provider == "shiprocket" ) {
      mylist = []; trackstatus = []; traks = ['42','18','17'];
      var trackData = track.tracking_data;
      i = trackData.shipment_track_activities.length - 1;
      j= 0; curStu = 'Ordered';
      for(; i >= 0; i--) {
        labelcode = trackData.shipment_track_activities[i]["sr-status"];
        if($.inArray(labelcode, mylist) == -1) {
          if($.inArray(labelcode, traks) > -1) {
            trackstatus[j] = { 'code': labelcode,
                           'date': trackData.shipment_track_activities[i]["date"],
                           'label': trackLabel(labelcode) }
            j++;
            curStu = trackLabel(labelcode);
          }
          mylist.push(labelcode)
        }
      }
      
      if(trackData.shipment_status == 7) {
        trackstatus[j] = { 'code': '7',
                           'date': trackData.shipment_track['0'].delivered_date,
                           'label': 'Delivered' }
        curStu = 'Delivered';
        j++;
      }
      
      tracks = { 'lan': j,
                'track_edd': trackData.shipment_track['0'].edd,
                'awb_code': trackData.shipment_track['0'].awb_code,
                'status': curStu
      }
      myTrack.push(tracks);
      myTrack.push(trackstatus);
      myTrack.push(trackData.shipment_track_activities);
    } else {
      mylist = [];
      trackstatus = [];
      traks = ['OP','OT','OO','DL','OC'];
      var trackData = track[0].track_arr;
      var j= 0;  curStu = 'Ordered';
      for(i = 0; i < trackData.length; i++) {
        labelcode = trackData[i].status_name;
        if($.inArray(labelcode, mylist) == -1) {
          if($.inArray(labelcode, traks) > -1) {
            trackstatus[j] = { 'code': labelcode,
                           'date': trackData[i].status_array[0].status_time,
                           'label': trackLabel(labelcode) }
            j++;
            curStu = trackLabel(labelcode);
          }
          mylist.push(labelcode)
        }
      }
      tracks = { 'lan': j,
                'track_edd': track[0].edd_stamp,
                'awb_code': track[0].courier_tracking_id,
                'status': curStu
      }
      myTrack.push(tracks);
      myTrack.push(trackstatus);
      myTrack.push(trackData);
    }
    
        const orderData = data.order_tracking[0];
        const orderDate = moment(anvData.order_date_time).format("Do MMM YY");
        const orderTime = moment(anvData.order_date_time).format('LT');     

        const trastatus = ['Dispatched','In Transit','Out For Delivery','Delivered'];
    
        var orderSt = ' - Thank you for shopping with us, your online shopping skills are truly exceptional! Your order is confirmed and will be with you in <b>5-7 business days.</b>';
    curSt = myTrack[0].lan;    
    if(curSt == 4) { var orderSt = ' - Thank you for shopping with us, your online shopping skills are truly exceptional! Your order has been delivered.</b>'; }
    else if(myTrack[0].track_edd != '') { var orderSt = " - We're excited to say that your order on the way! Right now, they’re estimated to arrive around <b>"+moment(myTrack[0].track_edd).format("MMM D, YYYY"); }
      var orderStatus = '<div class="tracking-top--text">'+success+'<h1>You have Got Good Taste!</h1><p>Hi <b>'+anvData.user_first_name+'</b>'+orderSt+'</p></div>';
    
        var trackInfo = '<div class="track-info"><div>Order ID: <strong>#'+anvData.order_id+'</strong></div>'+
        '<div class="track-info--mid">Tracking ID: <strong>'+myTrack[0].awb_code+'</strong></div>'+
        '<div>Last Updated: <strong class="track-conf" style="color: #669966">'+myTrack[0].status+'</strong></div></div>';

      var trackbar = '<div class="tracking-bar box-shadow">';
        trackbar += '<div class="tracking--bar">'+checkmark+'<b>Ordered,</b>'+moment(anvData.order_date_time).format("Do MMM, LT")+'</div>';
        $.each(myTrack[1], function(i, object) {
              trackbar += '<div class="line act"></div>';
              trackbar += '<div class="tracking--bar">'+checkmark+'<b>'+object.label+',</b>'+moment(object.date).format("Do MMM, LT")+'</div>';
            });
            for(n=curSt;n<4;n++) {
              trackbar += '<div class="line"></div>';
              trackbar += '<div class="tracking--bar fade">'+circledash+'<b>'+trastatus[n]+',</b>'+moment(myTrack[0].track_edd).format("Do MMM")+' 11:59 PM</div>';
            }
        trackbar += '</div>';
    
    var prodInfo = '';
    
    if(anvData.provider == "shiprocket" ) {
      var trackigSummary = '<div class="delievery_info box-shadow"><div class="delievery_list_wrap clearfix"><ul>';
    $.each(myTrack[2], function(i, object) {
        trackigSummary += '<li><span><b>Activity : </b>  <activity>'+object.activity+'</activity></span>'+
        '<span><b>Location : </b>  <activity>'+object.location+'</activity></span>'+
        '<div class="date_info_wrap"><span class="date">'+moment(object.date).format("D MMM")+'</span><span class="time">'+moment(object.date).format("LT")+'</span>'+
        '</div><i class="circle_icon"></i></li>';
    });
      trackigSummary += '</ul></div></div>';
    } else {
      var trackigSummary = '<div class="delievery_info box-shadow"><div class="delievery_list_wrap reverse clearfix"><ul>';
      $.each(myTrack[2], function(i, objects) {
        $.each(objects.status_array, function(i, object) {
        trackigSummary += '<li><span><b>Activity : </b>  <activity>'+object.pickrr_status+'</activity></span>'+
          '<span><b>Location : </b>  <activity>'+object.status_location+'</activity></span>'+
        '<div class="date_info_wrap"><span class="date">'+moment(object.status_time).format("D MMM")+'</span><span class="time">'+moment(object.status_time).format("LT")+'</span>'+
        '</div><i class="circle_icon"></i></li>';
        });
    });
      trackigSummary += '</ul></div></div>';

      if(orderData.item_list) {
          prodInfo = '<div id="productSummary" class="product-summary box-shadow"><table><tr><th>Item Summary</th><th class="right">Qty</th></tr>';
          $.each(orderData.item_list, function(i, object) {
            var prdPrice = '₹'+object.price;
            var subTotal = '₹'+object.price*object.quantity;
            if(object.price == null) { prdPrice = 'Free'; subTotal = 'Free'; }
              prodInfo += '<tr><td>'+object.item_name+'</td><td class="right">x'+object.quantity+'</td></tr>';
          });
          prodInfo += '</table></div>';
        }
    }

        var charge = '0.00';
    if (anvData.payment_method == "COD"){ charge = '50.00'; }
        var needhelp = '<div class="help-box box-shadow">'+helpicon+'<div><h5>Need Help with your order?</h5><p>Contact us with queries related to your order and delivery</p></div></div>';
        var address = '<div class="delivery box-shadow"><h5>Delivery Address</h5><p>'+anvData.address+'</p><p>Ph: '+anvData.phone+'</p></div>';
        var oSummery = '<div class="order-summary box-shadow"><h5>Order Summary</h5>'+
          '<div><span>Order Created</span> <b>'+orderDate+'</b></div>'+
          '<div><span>Order Time</span> <b>'+orderTime+'</b></div>'+
          '<div><span>Sub Total</span> <b>₹'+anvData.subtotal_price+'</b></div>'+
          '<div><span>Delivery Fee</span> <b>₹'+charge+'</b></div>'+
          '<div class="order-summary--total"><span>TOTAL</span> <b>₹'+anvData.total_price+'</b></div></div>';
        /* var coupon = '<a href="" class="coupon-rendum"><img src="https://cdn.shopify.com/s/files/1/0270/3346/9006/files/rendom-coupon.png" width="475"></a>';
        var travel = '<div class="travel-far box-shadow"><div class="travel-far--top">'+
          '<h4>Your product has travelled far and wide and has tales to tell.</h4><a href="">Know More</a></div>'+
          '<div class="travel-far--img">'+
          '<img src="https://cdn.shopify.com/s/files/1/0270/3346/9006/files/ord01.png" width="190">'+
          '<div>'+arrow+'</div>'+
          '<img src="https://cdn.shopify.com/s/files/1/0270/3346/9006/files/ord02.png" width="190">'+
          '<div>'+arrow+'</div>'+
          '<img src="https://cdn.shopify.com/s/files/1/0270/3346/9006/files/ord03.png" width="190"></div></div>';
        var lab = '<div class="lab-approved"><h4>We are quality proven and lab Approved</h4>'+
          '<a class="" href="">View Report</a>'+
          '<img src="https://cdn.shopify.com/s/files/1/0270/3346/9006/files/labaprove.png"></div>'; */

        jQuery('#trackpageContent').append(orderStatus);
        jQuery('#trackpageContent').append(trackInfo);
        jQuery('#trackpageContent').append(trackbar);
        var contentData = jQuery('<div class="track-content"></div>');

        if(isMobile) {
          coupon = '<a href="" class="coupon-rendum"><img src="https://cdn.shopify.com/s/files/1/0270/3346/9006/files/rendom-couponM.png" width="475"></a>';
            // contentData.append(travel);
            // contentData.append(coupon);
            // contentData.append(lab);           
            contentData.append(trackigSummary);
          if(anvData.provider != "shiprocket" ) {
            contentData.append('<div class="product-summary--top"><h5>Order Details</h5> <a onClick="orderSlide()">View All Details</a></div>');
          } // contentData.append(itemsinfo);
            contentData.append(prodInfo);
            contentData.append(oSummery);
            contentData.append(address);
            // contentData.append(needhelp);
        } else {
          var leftColumn = jQuery('<div class="track-content--left"></div>');
            // leftColumn.append(lab);
            // leftColumn.append(travel);
            leftColumn.append(prodInfo);
            leftColumn.append(trackigSummary);
            // leftColumn.append(itemsinfo);
          var rightColumn = jQuery('<div class="track-content--right"></div>');
            // rightColumn.append(coupon);
            rightColumn.append(oSummery);
            rightColumn.append(address);
           // rightColumn.append(needhelp);
           contentData.append(leftColumn);
           contentData.append(rightColumn);
        }
        jQuery('#trackpageContent').append(contentData);
  }
  
  function orderSpilt(track) {
    jQuery('#loadmore').remove();
      if (track.count > 0) {
          var c = 1;
          var trackData = '<h5>Tracking List</h5><table class="trackno-list"><tr><th width="30px">S.No.</th><th>Tracking ID/AWB</th><th width="30px">Items</th></tr>';

          $.each(track.data, function(i, trackO) {
            var tci = Object.keys(trackO)['0'];
            var tcL = trackO[tci];
            var tciStatus = '<span>Your Order Under Process</span>';
            if (tci.length > 2){
              tciStatus = '<span onclick="trackCOrder('+tci+')">'+tci+'</span>';
            }
            trackData += '<tr><td>0'+c+'</td><td>'+tciStatus+'</span></td><td class="center"><span onmouseover="myitem(tci0'+c+')" onmouseout="hideitem(tci0'+c+')">'+infoicon+'</span><div id="tci0'+c+'" style="display: none;">';
            $.each(tcL, function(i, trackI) {
              trackData += trackI+'<br>';
            });
            trackData += '</div></td></tr>';
            c++;
          });
          trackData += '</table>';
          jQuery('#trackData').html(trackData);
        } else {
          jQuery('.track-form').hide();
          jQuery('#trackpageContent').append('<div id="loadmore"><div class="lds-ripple"><div></div><div></div></div><br>Loading...</div>');
          var tci = '';
          $.each(track.data, function(i, trackO) {
            tci = Object.keys(trackO)['0'];
          });
          var turl = 'https://ops.anveshan.farm/api/v1/order-track?tracking_id='+tci;
          ajaxCall(turl, 'track');
        }
  }
  
  function ajaxCall(url, b) {
  $.ajax({ 
        type: "Get",
        url: url,
        dataType: "json",
        success: function(track) { 
          if(b == 'track') { console.log(track.status);
            if(track.status == 404) { console.log(track.status);
              jQuery('#loadmore').remove();
              jQuery('#trackData').html('');
              jQuery('#trackpageContent').html("<p>Order under process, please check after some time...</p>");
            } else {
              jQuery('.track-form p').html("Check current status of your shipment.");
              trackSuccess(track);
            }
          } else {
            if(track.status == false) {
              jQuery('#loadmore').remove();
              jQuery('#trackData').html('');
              jQuery('.track-form p').html("<span style='color: red'>Order number entered is incorrect</span>");
            } else if(track.count == 0) {
              jQuery('#loadmore').remove();
              jQuery('#trackData').html('');
              jQuery('.track-form p').html("<span style='color: red'>The order/shipment you're trying to track has not been shipped yet.</span>");
            } else {
              jQuery('.track-form p').html("Check current status of your shipment.");
              orderSpilt(track);
            }
          }
        },
        error: function() {
          if(b == 'track') {
            jQuery('.track-form p').html("<span style='color: red'>Tracking ID/AWB entered is incorrect</span>");
          } else {
            jQuery('.track-form p').html("<span style='color: red'>order number entered is incorrect</span>");
          }
        }
      });
   }
  
  function myitem(tip) { jQuery(tip).show(); }
  
  function hideitem(tip) { jQuery(tip).hide(); }
  
  function trackCOrder(tid) {
    var cu = 'https://shiprocket.co/tracking/'+tid;
    window.open(cu);
    //jQuery('.track-form').hide();
    //jQuery('#trackpageContent').append('<div id="loadmore"><div class="lds-ripple"><div></div><div></div></div><br>Loading...</div>');
    //var cu = 'https://ops.anveshan.farm/api/v1/order-track?tracking_id='+tid;
    //ajaxCall(cu, 'track');
  }
  
  function orderSlide() {
    jQuery('#productSummary').slideToggle();
    jQuery('.product-summary--top a').toggleClass('act');
  }
  
  jQuery(document).ready(function(){
    var currentURL = window.location.search;
    console.log(currentURL);
    if(currentURL != '' && currentURL != '?view=trackappbrew' ) {
      jQuery('#trackpageContent').append('<div id="loadmore"><div class="lds-ripple"><div></div><div></div></div><br>Loading...</div>');
      var u = "https://ops.anveshan.farm/api/v1/order-track"+currentURL;
      ajaxCall(u, 'track');
      jQuery('.track-form').hide();
    }
    
    jQuery('.iconSearch').click(function(){
      var trackId = jQuery("#trackInput").val();
      if (jQuery("input[name='trackCheckbox']:checked").val() === "order_id") {
          jQuery('.track-form').append('<div id="loadmore"><div class="lds-ripple"><div></div><div></div></div><br>Loading...</div>');
          jQuery('#trackData').html('');
          var track = 'https://ops.anveshan.farm/api/v1/check-order-split/?order_id='+trackId;
          ajaxCall(track, 'order');
      } else {
        var track = 'https://ops.anveshan.farm/api/v1/order-track?tracking_id='+trackId;
        ajaxCall(track, 'track');
      }
    });
    
    jQuery('.track-search--top input').click(function(){
      jQuery('#trackInput').attr("placeholder", jQuery(this).attr('data-val'));
    });
    
    jQuery('.back-track').on( "click", function(){
      jQuery('.track-form').show();
      jQuery('#trackpageContent').html('');
      jQuery('.back-button').hide();
    });
    
  });
  

</script>

  <div class="track-form box-shadow">
    <h1>{{ page_title }}</h1>
  <div class="track-search--top">
    <label class="label bold">Search By:</label>
    <input id="order_id" value="order_id" name="trackCheckbox" type="radio" data-val="Enter Your Order ID/No" checked>
    <label class="pre-text" for="order_id">Order ID/No</label>
    <input id="tracking_id" value="tracking_id" name="trackCheckbox" type="radio" data-val="Enter Your Tracking ID/AWB">
    <label class="pre-text" for="tracking_id">Tracking ID/AWB</label>
  </div>
    <div class="track-search--bottom">
    <input type="text" id="trackInput" class="textbox border-0" placeholder="Enter Your Order ID/No" required>
        <span class="iconSearch" tabindex="0" role="button">
          {% render 'icons', icons: 'search' %}
          <div class="lds-ripple" style="display: none;"><div></div><div></div></div>
        </span>
  </div>
  <p>Check current status of your shipment.</p>
    <div id="trackData"></div>
  </div>
<div class="back-track"><a class="back-button" style="display: none;"><svg width="19" height="16" viewBox="0 0 19 16" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M0.292893 7.29289C-0.0976314 7.68342 -0.0976315 8.31658 0.292892 8.7071L6.65685 15.0711C7.04738 15.4616 7.68054 15.4616 8.07107 15.0711C8.46159 14.6805 8.46159 14.0474 8.07107 13.6569L2.41421 8L8.07107 2.34314C8.46159 1.95262 8.46159 1.31946 8.07107 0.928931C7.68054 0.538406 7.04738 0.538406 6.65686 0.928931L0.292893 7.29289ZM19 7L1 7L1 9L19 9L19 7Z" fill="black"/></svg></a></div>
<div id="trackpageContent">
</div>



{% schema %}
  {
    "name": "Tracking Order",
  "class": "page-width track-outer",
    "settings": []
  }
{% endschema %}

{% stylesheet %}
.back-button { cursor: pointer; padding: 5px; margin-top: -20px; display: block; width: 33px; }
{% endstylesheet %}